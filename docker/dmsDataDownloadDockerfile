# pull official base image
FROM python:3.6-stretch

# set work directory
WORKDIR /app

# set environment variables
ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1

# install dependencies
RUN pip install --upgrade pip
RUN export LDFLAGS="-L/usr/local/opt/openssl/lib"

# copy project
COPY ./src /app/nmdc-proteomics-workflow/
COPY ./utility /app/nmdc-proteomics-workflow/
COPY ./setup.py /app/nmdc-proteomics-workflow/

# to access DMS (PNNL-internal)
COPY ./docker/freetds.conf /etc/freetds/freetds.conf
COPY ./docker/odbc.ini /etc/odbc.ini
COPY ./docker/odbcinst.ini /etc/odbcinst.ini

#RUN cd /app/ \
#    && git clone https://stash.pnnl.gov/scm/omcs/nmdc-proteomics-workflow.git

RUN pip install pymssql pandas requests bs4 seaborn openpyxl

RUN cd /app/nmdc-proteomics-workflow/ \
    && pip install -e .




